<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.java.BoardMapper">

	<!-- qna 입력 -->
	<insert id='insertQna' parameterType="com.java.domain.BoardVO">
		INSERT INTO qna(q_inquiry, q_title, q_content, q_pass, q_date, q_count, m_id)
		VALUES(#{q_inquiry}, #{q_title}, #{q_content}, #{q_pass}, NOW(), 0, #{m_id})
	</insert>
	
	<!-- qna게시판 게시물목록 --> <!-- 검색기능 추가 -->
	<select id='board_all' parameterType="com.java.domain.BoardVO" resultType="com.java.domain.BoardVO">
		SELECT *
		FROM qna
<!-- 		<where>
			<if test="sltfilter != null and sltfilter != '' and search != null and search != ''">
				${sltfilter} LIKE '%${search}%'
			</if>
		</where> -->
		ORDER BY q_postnum DESC
	</select>
	
	<!-- qna게시판 게시물불러오기 -->
	<select id='qnaView' parameterType="com.java.domain.BoardVO" resultType="com.java.domain.BoardVO">
		SELECT *
		FROM qna
		WHERE q_postnum = #{q_postnum}
	</select> 
	
	<!-- qna게시판 게시물 조회수 증가 -->
	<update id="incrementQnaCount" parameterType="com.java.domain.BoardVO">
		UPDATE qna
		SET q_count = q_count + 1
		WHERE q_postnum = #{q_postnum}
	</update>


</mapper>